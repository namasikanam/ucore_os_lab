# Lab8 实验报告

## 练习1

在此次练习中，我并未依循帮助注释的指示，而是重写了一套逻辑上更加简单，我个人也更加习惯的实现。在我的实现中，只有两种情况被考虑：
- 只用了一个块：直接作为块内处理。
- 用了多于一个块：两边的块作为块内处理，中间的块作为整块处理。

Q：请在实验报告中给出设计实现“UNIX 的 PIPE 机制”的概要设方案，鼓励给出详细设计方案

假设我们要讲进程 A 的输出 PIPE 至进程 B 的输入，则用一个特殊的文件作为 buffer，将 A 的输出写入至 buffer 中，再让 B 从 buffer 中读取即可。需要修改 `struct file` 以标明这是一个“从进程 A 到进程 B 的 PIPE”。

## 练习2

与参考代码相比，我做了更完备的鲁棒性，为`load_icode`中每一个可能出错的函数调用都输出了合适的错误信息。

建议：此次练习初始时并未提供lab7中的代码，会让同学（尤其是自己提前做的同学）误以为需要自己写出一个完整的`load_icode`，然而此函数的正确实现长达近两百行，让同学们自己独立正确地实现几乎是不可能的。建议此后将lab7的代码直接给出，并像此前的练习一样在需要修改的地方标注帮助注释。

Q：请在实验报告中给出设计实现基于“UNIX 的硬链接和软链接机制”的概要设方案，鼓励给出详细设计方案

硬链接：
- 硬链接文件的`inode`即为被硬链接的文件的`inode`；
- `inode`的引用计数即为被硬链接的数量。

软链接：
- 可简单地实现为一个常规的文本文件，其内容即为被软链接文件的地址；
- 将`sfs_disk_inode`的`type`设为软链接这一类型。

## 总结

### 本实验涉及的知识点

- 文件系统的含义
- 文件系统的设计
- 关于文件的基本操作：
    - 打开文件
    - 读取文件
    - 写入文件
    - 关闭文件

### 本实验未涉及的知识点

- 空闲空间管理
- 冗余磁盘阵列（RAID）
- I/O 子系统